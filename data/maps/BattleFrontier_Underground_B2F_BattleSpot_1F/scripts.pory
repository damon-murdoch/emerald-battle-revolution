raw `
BattleFrontier_Underground_B2F_BattleSpot_1F_MapScripts::
	.byte 0
`

script BattleFrontier_Underground_B2F_BattleSpot_1F_EventScript_RatingAttendant {
    lock
    faceplayer
    setvar(VAR_FRONTIER_FACILITY, FRONTIER_FACILITY_SPOT_RATING)
    special(SavePlayerParty)
    msgbox(format("Welcome to the Battle Spot!"))
    msgbox(format("This is the door for the rating battles facility."))
    msgbox(format("Start from the 1500s, and rise to the top of the 2000s!"))
    msgbox(format("Which battle style would you like to play?"))
    goto(BattleFrontier_Underground_B2F_BattleSpot_1F_EventScript_TryAskBattleType)
}

script BattleFrontier_Underground_B2F_BattleSpot_1F_EventScript_RankingAttendant {
    lock
    faceplayer
    setvar(VAR_FRONTIER_FACILITY, FRONTIER_FACILITY_SPOT_RANKING)
    special(SavePlayerParty)
    msgbox(format("Welcome to the Battle Spot!"))
    msgbox(format("This is the door for the ranked battles facility."))
    msgbox(format("Rise through the ranks to the top of the Master Ball Tier!"))
    msgbox(format("Which battle style would you like to play?"))
    goto(BattleFrontier_Underground_B2F_BattleSpot_1F_EventScript_TryAskBattleType)
}

script BattleFrontier_Underground_B2F_BattleSpot_1F_EventScript_TryAskBattleType {
    multichoice2(0,0,BattleFrontier_Underground_B2F_BattleSpot_1F_EventScript_AskBattleType)
    switch(var(VAR_RESULT)) {
        case 0: # Singles
            goto(BattleFrontier_Underground_B2F_BattleSpot_1F_EventScript_AskEnterSinglesChallenge)
        case 1: # Doubles
            goto(BattleFrontier_Underground_B2F_BattleSpot_1F_EventScript_AskEnterDoublesChallenge)
    }
}

script BattleFrontier_Underground_B2F_BattleSpot_1F_EventScript_AskEnterSinglesChallenge {
    multichoice(17,6,MULTI_CHALLENGEINFO,FALSE)
    switch(var(VAR_RESULT)) {
        case 0: 
            goto(BattleFrontier_Underground_B2F_BattleSpot_1F_EventScript_TryEnterSinglesChallenge)
        case 0: 
            goto(BattleFrontier_Underground_B2F_BattleSpot_1F_EventScript_ExplainSinglesChallenge)
        default: 
            goto(BattleFrontier_Underground_B2F_BattleSpot_1F_EventScript_CancelChallenge)
    }
}

script BattleFrontier_Underground_B2F_BattleSpot_1F_EventScript_TryEnterSinglesChallenge {
    setvar(VAR_FRONTIER_BATTLE_MODE, FRONTIER_MODE_SINGLES)
    message(BattleFrontier_BattleTowerLobby_Text_WhichLevelMode)
    waitmessage
    multichoice(17, 6, MULTI_LEVEL_MODE, FALSE)
    switch(var(VAR_RESULT)) {
        case FRONTIER_LVL_TENT: 
            BattleFrontier_Underground_B2F_BattleSpot_1F_EventScript_CancelChallenge
        case MULTI_B_PRESSED:
            BattleFrontier_Underground_B2F_BattleSpot_1F_EventScript_CancelChallenge
    }
    frontier_checkineligible
    goto_if_eq(VAR_0x8004, TRUE, BattleFrontier_Underground_B2F_BattleSpot_1F_EventScript_NotEnoughValidMons)
    frontier_set(FRONTIER_DATA_LVL_MODE, VAR_RESULT)
    msgbox(format(BattleFrontier_BattleTowerLobby_Text_SelectThreeMons, MSGBOX_DEFAULT))
    fadescreen(FADE_TO_BLACK)
    call(BattleFrontier_EventScript_GetLvlMode)
    copyvar(VAR_0x8004, VAR_RESULT)
	setvar(VAR_0x8005, FRONTIER_PARTY_SIZE)
    special(ChoosePartyForBattleFrontier)
	waitstate
    goto_if_eq(VAR_RESULT, 0, BattleFrontier_Underground_B2F_BattleSpot_1F_EventScript_LoadPartyCancelChallenge)
    msgbox(BattleFrontier_BattleTowerLobby_Text_OkayToSaveBeforeEntering, MSGBOX_YESNO)
    switch(var(VAR_RESULT)) {
        case NO:
            goto(BattleFrontier_Underground_B2F_BattleSpot_1F_EventScript_LoadPartyCancelChallenge)
        case YES:
            goto(BattleFrontier_Underground_B2F_BattleSpot_1F_EventScript_SaveBeforeSinglesChallenge)
        default: 
            goto(BattleFrontier_Underground_B2F_BattleSpot_1F_EventScript_LoadPartyCancelChallenge)
    }
}

script BattleFrontier_Underground_B2F_BattleSpot_1F_EventScript_SaveBeforeSinglesChallenge {
    frontier_set(FRONTIER_DATA_SELECTED_MON_ORDER)
	setvar(VAR_TEMP_CHALLENGE_STATUS, 0)
	# tower_init
	# tower_set TOWER_DATA_WIN_STREAK_ACTIVE, TRUE
	frontier_set(FRONTIER_DATA_PAUSED, FALSE)
	special(LoadPlayerParty)
	closemessage
	delay(2)
	call(Common_EventScript_SaveGame)
	setvar(VAR_TEMP_CHALLENGE_STATUS, 255)
	goto_if_eq(VAR_RESULT, 0, BattleFrontier_Underground_B2F_BattleSpot_1F_EventScript_CancelChallengeSaveFailed)
	# incrementgamestat GAME_STAT_ENTERED_BATTLE_TOWER
	# setvar VAR_BRAVO_TRAINER_BATTLE_TOWER_ON, TRUE
	goto(BattleFrontier_Underground_B2F_BattleSpot_1F_EventScript_EnterBattleRoom)
	end
}

script BattleFrontier_Underground_B2F_BattleSpot_1F_EventScript_ExplainSinglesChallenge {
    # TODO: Make Custom Explanation
	msgbox(BattleFrontier_BattleTowerLobby_Text_ExplainSinglesChallenge, MSGBOX_DEFAULT)
	goto(BattleFrontier_Underground_B2F_BattleSpot_1F_EventScript_AskEnterSinglesChallenge)
	end
}

script BattleFrontier_Underground_B2F_BattleSpot_1F_EventScript_AskEnterDoublesChallenge {
    multichoice(17,6,MULTI_CHALLENGEINFO,FALSE)
    switch(var(VAR_RESULT)) {
        case 0: 
            goto(BattleFrontier_Underground_B2F_BattleSpot_1F_EventScript_TryEnterDoublesChallenge)
        case 0: 
            goto(BattleFrontier_Underground_B2F_BattleSpot_1F_EventScript_ExplainDoublesChallenge)
        default: 
            goto(BattleFrontier_Underground_B2F_BattleSpot_1F_EventScript_CancelChallenge)
    }
}

script BattleFrontier_Underground_B2F_BattleSpot_1F_EventScript_TryEnterDoublesChallenge {
    setvar(VAR_FRONTIER_BATTLE_MODE, FRONTIER_MODE_DOUBLES)
    message(BattleFrontier_BattleTowerLobby_Text_WhichLevelMode)
    waitmessage
    multichoice(17, 6, MULTI_LEVEL_MODE, FALSE)
    switch(var(VAR_RESULT)) {
        case FRONTIER_LVL_TENT: 
            BattleFrontier_Underground_B2F_BattleSpot_1F_EventScript_CancelChallenge
        case MULTI_B_PRESSED:
            BattleFrontier_Underground_B2F_BattleSpot_1F_EventScript_CancelChallenge
    }
    frontier_checkineligible
    goto_if_eq(VAR_0x8004, TRUE, BattleFrontier_Underground_B2F_BattleSpot_1F_EventScript_NotEnoughValidMons)
    frontier_set(FRONTIER_DATA_LVL_MODE, VAR_RESULT)
    msgbox(format(BattleFrontier_BattleTowerLobby_Text_SelectFourMons, MSGBOX_DEFAULT))
    fadescreen(FADE_TO_BLACK)
    call(BattleFrontier_EventScript_GetLvlMode)
    copyvar(VAR_0x8004, VAR_RESULT)
	setvar(VAR_0x8005, FRONTIER_PARTY_SIZE)
    special(ChoosePartyForBattleFrontier)
	waitstate
    goto_if_eq(VAR_RESULT, 0, BattleFrontier_Underground_B2F_BattleSpot_1F_EventScript_LoadPartyCancelChallenge)
    msgbox(BattleFrontier_BattleTowerLobby_Text_OkayToSaveBeforeEntering, MSGBOX_YESNO)
    switch(var(VAR_RESULT)) {
        case NO:
            goto(BattleFrontier_Underground_B2F_BattleSpot_1F_EventScript_LoadPartyCancelChallenge)
        case YES:
            goto(BattleFrontier_Underground_B2F_BattleSpot_1F_EventScript_SaveBeforeSinglesChallenge)
        default: 
            goto(BattleFrontier_Underground_B2F_BattleSpot_1F_EventScript_LoadPartyCancelChallenge)
    }
}

script BattleFrontier_Underground_B2F_BattleSpot_1F_EventScript_SaveBeforeDoublesChallenge {
	frontier_set(FRONTIER_DATA_SELECTED_MON_ORDER)
	setvar(VAR_TEMP_CHALLENGE_STATUS, 0)
	# tower_init
	# tower_set TOWER_DATA_WIN_STREAK_ACTIVE, TRUE
	frontier_set(FRONTIER_DATA_PAUSED, FALSE)
	special(LoadPlayerParty)
	closemessage
	delay(2)
	call(Common_EventScript_SaveGame)
	setvar(VAR_TEMP_CHALLENGE_STATUS, 255)
	goto_if_eq(VAR_RESULT, 0, BattleFrontier_Underground_B2F_BattleSpot_1F_EventScript_CancelChallengeSaveFailed)
	# incrementgamestat GAME_STAT_ENTERED_BATTLE_TOWER
	# setvar VAR_BRAVO_TRAINER_BATTLE_TOWER_ON, FALSE
	goto(BattleFrontier_Underground_B2F_BattleSpot_1F_EventScript_EnterBattleRoom)
	end
}

script BattleFrontier_Underground_B2F_BattleSpot_1F_EventScript_ExplainDoublesChallenge {
	msgbox(BattleFrontier_BattleTowerLobby_Text_ExplainDoublesChallenge, MSGBOX_DEFAULT)
	goto(BattleFrontier_Underground_B2F_BattleSpot_1F_EventScript_AskEnterDoublesChallenge)
	end
}

text BattleFrontier_Underground_B2F_BattleSpot_1F_Text_AskBattleType {
    "SINGLES$"
    "DOUBLES$"
    ""
}

text BattleFrontier_Underground_B2F_BattleSpot_1F_Text_AskBattleMode {
    "LVL 50$"
    "OPEN$"
    ""
}